{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../login.service\";\nimport * as i3 from \"../auth.service\";\nimport * as i4 from \"@angular/common\";\nfunction LoginComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_0_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.signIn());\n    });\n    i0.ɵɵelementStart(1, \"div\", 2);\n    i0.ɵɵelement(2, \"img\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 4)(4, \"b\");\n    i0.ɵɵtext(5, \"Sign in with google\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  var _class;\n  class LoginComponent {\n    constructor(route, router, loginService, auth) {\n      this.route = route;\n      this.router = router;\n      this.loginService = loginService;\n      this.auth = auth;\n      this.googleLoginUrl = null;\n    }\n    ngOnInit() {\n      if (this.auth.isAuthenticated()) {\n        this.router.navigateByUrl('home');\n      }\n      const code = this.route.snapshot.queryParamMap.get('code');\n      const error = this.route.snapshot.queryParamMap.get('error');\n      if (error) {\n        console.log(`An error occurred: ${error}`);\n        localStorage.removeItem('token');\n        this.router.navigate(['/']);\n      } else {\n        if (code) {\n          this.loginService.postSignIn(code).subscribe(accessToken => {\n            localStorage.setItem('token', accessToken);\n            this.router.navigate(['home']);\n          }, () => {\n            localStorage.removeItem('token');\n            this.router.navigate(['/']);\n          });\n        } else {\n          this.loginService.getLogin().subscribe(linkLogin => {\n            this.googleLoginUrl = linkLogin;\n          }, () => {\n            localStorage.removeItem('token');\n            this.router.navigate(['/']);\n          });\n        }\n      }\n    }\n    signIn() {\n      window.location.href = this.googleLoginUrl;\n    }\n  }\n  _class = LoginComponent;\n  _class.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.AuthService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-login\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"google-btn\", 3, \"click\", 4, \"ngIf\"], [1, \"google-btn\", 3, \"click\"], [1, \"google-icon-wrapper\"], [\"src\", \"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\", 1, \"google-icon\"], [1, \"btn-text\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, LoginComponent_div_0_Template, 6, 0, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.googleLoginUrl);\n      }\n    },\n    dependencies: [i4.NgIf],\n    styles: [\"[_nghost-%COMP%]{display:flex;justify-content:center;margin-top:5em}[_nghost-%COMP%]   .google-btn[_ngcontent-%COMP%]{cursor:pointer;width:184px;height:42px;background-color:#4285f4;border-radius:2px;box-shadow:0 3px 4px #00000040}[_nghost-%COMP%]   .google-btn[_ngcontent-%COMP%]   .google-icon-wrapper[_ngcontent-%COMP%]{position:absolute;margin-top:1px;margin-left:1px;width:40px;height:40px;border-radius:2px;background-color:#fff}[_nghost-%COMP%]   .google-btn[_ngcontent-%COMP%]   .google-icon[_ngcontent-%COMP%]{position:absolute;margin-top:11px;margin-left:11px;width:18px;height:18px}[_nghost-%COMP%]   .google-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{float:right;margin:11px 11px 0 0;color:#fff;font-size:14px;letter-spacing:.2px;font-family:Roboto}[_nghost-%COMP%]   .google-btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #4285f4}[_nghost-%COMP%]   .google-btn[_ngcontent-%COMP%]:active{background:#1669F2}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}