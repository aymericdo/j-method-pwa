{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { MAT_BOTTOM_SHEET_DATA } from '@angular/material/bottom-sheet';\nimport { OffsetTopDirective } from 'src/app/shared/scroll-to/offset-top.directive';\nimport { ScrollableDirective } from 'src/app/shared/scroll-to/scrollable.directive';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/bottom-sheet\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/list\";\nimport * as i4 from \"../../shared/infinite-scroll/infinite-scroll.component\";\nimport * as i5 from \"../../shared/scroll-to/offset-top.directive\";\nimport * as i6 from \"../../shared/scroll-to/scrollable.directive\";\nfunction HoursSelectorDialogComponent_a_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 2, 3);\n    i0.ɵɵlistener(\"click\", function HoursSelectorDialogComponent_a_4_Template_a_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const minute_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.handleClick(minute_r1));\n    });\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const minute_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"data-min\", minute_r1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", minute_r1, \" \", minute_r1 > 1 ? \"minutes\" : \"minute\", \"\");\n  }\n}\nexport let HoursSelectorDialogComponent = /*#__PURE__*/(() => {\n  var _class;\n  class HoursSelectorDialogComponent {\n    constructor(data, bottomSheetRef) {\n      this.data = data;\n      this.bottomSheetRef = bottomSheetRef;\n      this.deltaChanged = new EventEmitter();\n      this.hoverHour = null;\n      this.baseArray = Array.from(Array(100).keys()).slice(1);\n      this.minutes = [...this.baseArray];\n    }\n    ngAfterViewInit() {\n      const match = this.listItems.find((el, i) => el.dataValues['data-min'] + 2 === this.data.duration);\n      this.list.scrollTop = match ? match.offsetTop : this.data.duration < 3 ? this.listItems.first.offsetTop : this.listItems.last.offsetTop;\n    }\n    addNextBatch() {\n      const lastMinute = this.minutes[this.minutes.length - 1];\n      this.baseArray.forEach(m => {\n        this.minutes.push(lastMinute + m);\n      });\n    }\n    handleClick(minutes) {\n      this.deltaChanged.emit(minutes);\n      this.bottomSheetRef.dismiss();\n    }\n    trackByMethod(index, el) {\n      return el;\n    }\n  }\n  _class = HoursSelectorDialogComponent;\n  _class.ɵfac = function HoursSelectorDialogComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(MAT_BOTTOM_SHEET_DATA), i0.ɵɵdirectiveInject(i1.MatBottomSheetRef));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-hours-selector\"]],\n    viewQuery: function HoursSelectorDialogComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(ScrollableDirective, 5);\n        i0.ɵɵviewQuery(OffsetTopDirective, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.list = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.listItems = _t);\n      }\n    },\n    outputs: {\n      deltaChanged: \"deltaChanged\"\n    },\n    decls: 5,\n    vars: 2,\n    consts: [[\"appScrollable\", \"\", 3, \"scrolled\"], [\"appOffsetTop\", \"\", \"mat-list-item\", \"\", 3, \"data-min\", \"click\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"appOffsetTop\", \"\", \"mat-list-item\", \"\", 3, \"data-min\", \"click\"], [\"minute\", \"\"]],\n    template: function HoursSelectorDialogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1, \"Dur\\u00E9e de r\\u00E9vision\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"app-infinite-scroll\", 0);\n        i0.ɵɵlistener(\"scrolled\", function HoursSelectorDialogComponent_Template_app_infinite_scroll_scrolled_2_listener() {\n          return ctx.addNextBatch();\n        });\n        i0.ɵɵelementStart(3, \"mat-nav-list\");\n        i0.ɵɵtemplate(4, HoursSelectorDialogComponent_a_4_Template, 4, 3, \"a\", 1);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.minutes)(\"ngForTrackBy\", ctx.trackByMethod);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.MatNavList, i3.MatListItem, i4.InfiniteScrollComponent, i5.OffsetTopDirective, i6.ScrollableDirective],\n    styles: [\"[_nghost-%COMP%]   app-infinite-scroll[_ngcontent-%COMP%]{display:block;height:14em;overflow-y:auto}\"]\n  });\n  return HoursSelectorDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}